<!DOCTYPE html>
<html>
  <head>
    <title>Xuan Sandbox</title>
    <meta charset="UTF-8" />
    <link href="src/styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>

  <body>
    <h1>My Weather App</h1>
    <form>
      <div class="mb-3">
        <input
          type="text"
          placeholder="City Name"
          class="form-control"
          id="cityName-input"
        />
      </div>
      <button type="submit" id="search" class="btn btn-primary">Search</button>
      <button type="submit" class="btn btn-secondary" id="homepage">
        Back to Home Location
      </button>
    </form>
    <h2>You are currently in <span id="cityNameTag">--city name-- </span></h2>
    <span id="currentTimeTag"><strong> --Current Time-- </strong></span>
    <p>In your location, the weather is</p>
    <div class="card-body">
      <h3 id="changeDate">☁Wed</h3>
      <p class="temp">
        <span id="realtemp"> 17 </span> <a href="#" id="celsius-link">°C</a> /
        <a href="#" id="fahrenheit-link">°F</a>
      </p>
      <p id="saying">Partly Cloudy</p>
      <p class="humidity">Humidity: <span id="realhumid"></span></p>
      <p class="wind">Wind: <span id="realwind"></span></p>
    </div>
    <p>The weekly forecast is as follows:</p>
    <figure class="figure">
      <img
        src="https://play-lh.googleusercontent.com/zoAQwsds7P2exgVXFUiV8faEmblggMeZ59pILSa9B1cCYwHD7PFExvHhdDZCvW1enpEY"
        class="figure-img img-fluid rounded"
      />
      <figcaption class="figure-caption">
        Above image will be replaced by a forecast graph.
      </figcaption>
    </figure>
    <div class="WeekForecast">
      <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3>🌧Mon</h3>
              <p>10° / <strong>22°</strong></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3>🌪Tue</h3>
              <p>10° / <strong>22°</strong></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3>☁Wed</h3>
              <p>10° / <strong>22°</strong></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3>⛈Thu</h3>
              <p>10° / <strong>22°</strong></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3>🌤Fri</h3>
              <p>10° / <strong>22°</strong></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3>🌦Sat</h3>
              <p>10° / <strong>22°</strong></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3>☀Sun</h3>
              <p>10° / <strong>22°</strong></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div>
      Developer Note
      <br />
      This is the roughest grid. For next iteration, remember to
      <ul>
        <li>
          Make day-card into clickable button, responsive when users click
        </li>
        <li>DONE: Feed --city name-- with whatever typed in search</li>
        <li>secondary button will prompt JSS to ask where they are based</li>
        <li>Add forecast/ trend graph for temp, precipitation, and wind</li>
      </ul>
    </div>
    <script>
      let now = new Date();
      let week = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday",
      ];
      let day = week[now.getDay()];
      let months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];
      let month = months[now.getMonth()];
      let date = now.getDate();
      let hour = now.getHours();
      if (hour < 10) {
        hour = `0${hour}`;
      }
      let minute = now.getMinutes();
      if (minute < 10) {
        minute = `0${minute}`;
      }
      let currentTime = document.querySelector("#currentTimeTag");
      currentTime.innerHTML = `${day}, ${date} ${month} ${hour}:${minute}`;
      let h3 = document.querySelector("#changeDate");
      h3.innerHTML = `${day}`;
      //Display city name//
      function where(event) {
        event.preventDefault();
        let input = document.querySelector("#cityName-input");
        let output = document.querySelector("#cityNameTag");
        let whereTown = input.value;
        output.innerHTML = input.value;
        let apiKey = "b81bc829f24d038a00971d55be0bd38d";
        let unit = "metric";
        let apiURL1 = `https://api.openweathermap.org/data/2.5/weather?q=${whereTown}&appid=${apiKey}&units=${unit}`;
        axios.get(apiURL1).then(showNewTemp);
      }
      let city = document.querySelector("form");
      city.addEventListener("submit", where);
      //Challenge 3//
      //Display real-time temp with Axios//
      function showNewTemp(response) {
        let realTemp = document.querySelector("#realtemp");
        realTemp.innerHTML = `${response.data.main.temp}°C`;
        let realHumid = document.querySelector("#realhumid");
        realHumid.innerHTML = `${response.data.main.humidity}%`;
        let realWind = document.querySelector("#realwind");
        realWind.innerHTML = `${response.data.wind.speed} km/h`;
        let realStatus = document.querySelector("#saying");
        realStatus.innerHTML = `${response.data.weather[0].main}`;
      }
    </script>
  </body>
</html>
